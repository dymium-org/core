<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Transition class — Trans • dymiumCore</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Transition class — Trans" />
<meta property="og:description" content="A class that perform Monte Carlo simulation on agents using a probabilistic model.
Work flow: initialise() -&amp;gt; filter() -&amp;gt; mutate() -&amp;gt; simulate() -&amp;gt; postprocess().
Note that, to swap the run order of filter() and mutate() you need to change the
mutate_first public field to TRUE." />
<meta property="og:image" content="https://core.dymium.org/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-158512288-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158512288-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dymiumCore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.9.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dymium-intro.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/why-another-microsim.html">Why another microsimulation package?</a>
    </li>
    <li>
      <a href="../articles/publications.html">Publications</a>
    </li>
    <li class="dropdown-header">Manual</li>
    <li>
      <a href="../articles/for-developers.html">For developers (Work in progress)</a>
    </li>
    <li>
      <a href="../articles/for-modellers.html">For modellers</a>
    </li>
    <li>
      <a href="../articles/for-endusers.html">For end users (Work in progress)</a>
    </li>
    <li class="dropdown-header">Use cases</li>
    <li>
      <a href="../articles/residential-mobility.html">Residential mobility</a>
    </li>
    <li>
      <a href="../articles/mate-matching.html">Mate matching</a>
    </li>
    <li>
      <a href="../articles/marital-status.html">Marital status</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dymium-org/dymiumCore/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Transition class</h1>
    <small class="dont-index">Source: <a href='https://github.com/dymium-org/dymiumCore/blob/master/R/Transition.R'><code>R/Transition.R</code></a></small>
    <div class="hidden name"><code>Trans.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A class that perform Monte Carlo simulation on agents using a probabilistic model.
Work flow: <code>initialise()</code> -&gt; <code><a href='https://rdrr.io/r/stats/filter.html'>filter()</a></code> -&gt; <code>mutate()</code> -&gt; <code><a href='https://rdrr.io/r/stats/simulate.html'>simulate()</a></code> -&gt; <code>postprocess()</code>.
Note that, to swap the run order of <code><a href='https://rdrr.io/r/stats/filter.html'>filter()</a></code> and <code>mutate()</code> you need to change the
<code>mutate_first</code> public field to <code>TRUE</code>.</p>
    </div>



    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p><code>target</code> can be static or dynamic depending on the data structure of it. A static
target can be a named list or an integer value depending its usage in each
event function.</p>
    <h2 class="hasAnchor" id="construction"><a class="anchor" href="#construction"></a>Construction</h2>

    
<pre><span class='no'>Trans</span>$<span class='fu'>new</span>(<span class='no'>x</span>, <span class='no'>model</span>, <span class='kw'>target</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>targeted_agents</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
<ul>
<li><p><code>x</code> :: <code>R6</code><br />
A Agent class inheritance object.</p></li>
<li><p><code>model</code> :: <code>object</code><br />
A model</p></li>
<li><p><code>target</code> :: [<code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code>|<a href='Target.html'>Target</a>]<br />
(Default as NULL). A number that forces the number of micro events to occur. For example, if
`10`` is speficied, there will be 10 agents that under go the event. However,
if a integer vector is given it must be the same length as the classes in the model.
This only works for classification models. If a <a href='Target.html'>Target</a> object is given, the
target values will be scaled down by the scaling factor of that was set by
the <a href='World.html'>World</a> object in your currently active environment.</p></li>
<li><p><code>targeted_agent</code> :: <code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code><br />
(Default as NULL) A integer vectors that contains ids of agents in <code>x</code> to undergo the event.</p></li>
</ul>

    <h2 class="hasAnchor" id="fields"><a class="anchor" href="#fields"></a>Fields</h2>

    

<ul>
<li><p><code>mutate_first</code>:: <code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code><br />
Default as FALSE, this flag is used to indicate whether the attribute data from
the Agent in <code>x</code> should be mutated (<code>$mutate(.data)</code>) before filtered (<code>$filter(.data)</code>).
See the description section for more details about the processing steps of Trans.</p></li>
</ul>

    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<ul>
<li><p><code><a href='https://rdrr.io/r/stats/filter.html'>filter(.data)</a></code><br />
(<code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table::data.table()</a></code>) -&gt; <code>[data.table::data.table()]</code><br />
<strong>(By default, first of the preprocessing steps)</strong><br />
By default this method returns the input <code>.data</code>. This method can be overwrite
to give the user the flexibility to 'filter' the data prior to making prediction
by the given model. Filtering for eligible agents for this transition can be done in this step.</p></li>
<li><p><code>mutate(.data)</code><br />
(<code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table::data.table()</a></code>) -&gt; <code>[data.table::data.table()]</code><br />
<strong>(By default, second of the preprocessing steps)</strong><br />
By default this method returns the input <code>.data</code>. This method can be overwrite
to give the user the flexibility to 'mutate' the data prior to making prediction
by the given model. Adding derived variables and historical life course of the agents
can be done in this step.</p></li>
<li><p><code>update_agents(attr)</code><br />
(<code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code>)<br />
Update the attribute data of the agents that undergo the transition event.</p></li>
<li><p><code>get_result(ids)</code><br />
(<code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code>) -&gt; <a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table::data.table</a><br />
Returns the simulation result in a <a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table::data.table</a> format with two
columns <code>id</code> and <code>response</code>.</p></li>
<li><p><code>get_nrow_result()</code><br />
Returns the number of rows in the simulation result.</p></li>
<li><p><code>get_decision_maker_ids(response_filter = NULL)</code><br />
(<code><a href='https://rdrr.io/r/base/character.html'>character()</a></code>) -&gt; (<code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code>)<br />
Returns ids of the agents that have their response equal to <code>response_filter</code>.</p></li>
</ul>


  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Amarin Siripanich, Taha Rashidi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '5b9cd61032daf2c5966b7cd693157aa2',
    indexName: 'dymiumcore',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


