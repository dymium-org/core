<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Pipeline — Pipeline • dymiumCore</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Pipeline — Pipeline" />
<meta property="og:description" content="Pipeline acts as a wraper for event functions. It can shuffle the order in which
the wrapped event functions get executed and also control how many times they
should be run within the pipeline. The later capability allows the modeller to
mix events with different time resolutions in a single microsimulation pipeline.
A more tangible example would be when you are modelling residential relocation
of households, renters may relocate every 6 months but buyers don't move that often
hence you can use the Pipeline to run a renter relocation event twice for every
run of a buy relocation event.pipeline &amp;amp;lt;- Pipeline$new(. %&amp;amp;gt;%
                          renter_relocation_event())

for (year in 1:5) {
  world %&amp;amp;gt;%
    pipeline$run(n_loops = 2) %&amp;amp;gt;%
    buyer_relocation_event()
}" />
<meta property="og:image" content="https://core.dymium.org/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-158512288-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158512288-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dymiumCore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dymium-intro.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/why-another-microsim.html">Why another microsimulation package?</a>
    </li>
    <li class="dropdown-header">Manual</li>
    <li>
      <a href="../articles/for-developers.html">For developers</a>
    </li>
    <li>
      <a href="../articles/for-modellers.html">For modellers</a>
    </li>
    <li>
      <a href="../articles/for-endusers.html">For end users</a>
    </li>
    <li class="dropdown-header">Use cases</li>
    <li>
      <a href="../articles/residential-mobility.html">Residential mobility</a>
    </li>
    <li>
      <a href="../articles/mate-matching.html">Mate matching</a>
    </li>
    <li>
      <a href="../articles/marital-status.html">Marital status</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dymium-org/dymiumCore/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Pipeline</h1>
    <small class="dont-index">Source: <a href='https://github.com/dymium-org/dymiumCore/blob/master/R/Pipeline.R'><code>R/Pipeline.R</code></a></small>
    <div class="hidden name"><code>Pipeline.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Pipeline acts as a wraper for event functions. It can shuffle the order in which
the wrapped event functions get executed and also control how many times they
should be run within the pipeline. The later capability allows the modeller to
mix events with different time resolutions in a single microsimulation pipeline.
A more tangible example would be when you are modelling residential relocation
of households, renters may relocate every 6 months but buyers don't move that often
hence you can use the Pipeline to run a renter relocation event twice for every
run of a buy relocation event.<div class="r"></p><pre><span class='no'>pipeline</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='no'>Pipeline</span>$<span class='fu'>new</span>(<span class='no'>.</span> <span class='kw'>%&amp;gt;%</span>
                          <span class='fu'>renter_relocation_event</span>())

<span class='kw'>for</span> (<span class='no'>year</span> <span class='kw'>in</span> <span class='fl'>1</span>:<span class='fl'>5</span>) {
  <span class='no'>world</span> <span class='kw'>%&amp;gt;%</span>
    <span class='no'>pipeline</span>$<span class='fu'>run</span>(<span class='kw'>n_loops</span> <span class='kw'>=</span> <span class='fl'>2</span>) <span class='kw'>%&amp;gt;%</span>
    <span class='fu'>buyer_relocation_event</span>()
}</pre><p></div></p>
    </div>



    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p><a href='https://rdrr.io/pkg/R6/man/R6Class.html'>R6::R6Class</a> object inheriting from <a href='Generic.html'>dymiumCore::Generic</a>.</p>
    <h2 class="hasAnchor" id="construction"><a class="anchor" href="#construction"></a>Construction</h2>

    
<pre><span class='no'>Pipeline</span>$<span class='fu'>new</span>(<span class='no'>x</span>)</pre>
<ul>
<li><p><code>x</code><br />
Event functions in a <code>%&gt;%</code> structure where the start of the pipe must be <code>.</code>. \
See the example section below.</p></li>
</ul>

    <h2 class="hasAnchor" id="public-methods"><a class="anchor" href="#public-methods"></a>Public Methods</h2>

    

<ul>
<li><p><code>set(x)</code><br />
Sets the event functions inside the Pipeline object.</p></li>
<li><p><code><a href='https://rdrr.io/r/base/get.html'>get()</a></code><br />
Returns the event functions.</p></li>
<li><p><code>run(x, shuffle = FALSE, n_loops = 1L)</code><br />
(<a href='Container.html'>Container</a>, <code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code>, <code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code>) -&gt; <a href='Container.html'>Container</a><br />
Execute the event functions in the order that it was added. To make the
order randomised set shuffle as <code>TRUE</code>. <code>n_loops</code> controls how many times
should the event functions be executed before exiting the Pipeline. If it is
greater than one then the event functions will be run multiple times it
the same order or randomised orders each time, depending on the value in <code>shuffle</code>.</p></li>
<li><p><code><a href='https://rdrr.io/r/base/print.html'>print()</a></code><br /></p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># create Population</span>
<span class='no'>Pop</span> <span class='kw'>&lt;-</span> <span class='no'>Population</span>$<span class='fu'>new</span>(<span class='no'>toy_individuals</span>, <span class='no'>toy_households</span>, <span class='kw'>pid_col</span> <span class='kw'>=</span> <span class='st'>"pid"</span>, <span class='kw'>hid_col</span> <span class='kw'>=</span> <span class='st'>"hid"</span>)</div><div class='output co'>#&gt; [04:17:42] WARN  dymiumCore .subset2(public_bind_env, "initialize"): Creating a `hhsize` column in `hh_data` as it is not provided.</div><div class='input'>
<span class='co'># create 3 dummy events</span>
<span class='no'>event1</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>object</span>) {
  <span class='co'># do something</span>
  <span class='fu'><a href='https://rdrr.io/r/base/function.html'>return</a></span>(<span class='no'>object</span>)
}

<span class='no'>event2</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>object</span>) {
  <span class='co'># do something</span>
  <span class='fu'><a href='https://rdrr.io/r/base/function.html'>return</a></span>(<span class='no'>object</span>)
}

<span class='no'>event3</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>object</span>) {
  <span class='co'># do something</span>
  <span class='fu'><a href='https://rdrr.io/r/base/function.html'>return</a></span>(<span class='no'>object</span>)
}

<span class='co'># construct the sequence of the dummy events</span>
<span class='co'># pipeline &lt;- Pipeline$new(. %&gt;% event1 %&gt;% event2 %&gt;% event3)</span>
<span class='co'># pipeline$get()</span>

<span class='co'># run events in a random order</span>
<span class='co'># pipeline$run(x = Pop, shuffle = TRUE)</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Amarin Siripanich, Taha Rashidi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '5b9cd61032daf2c5966b7cd693157aa2',
    indexName: 'dymiumcore',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


