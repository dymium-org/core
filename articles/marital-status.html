<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Marital status • dymiumCore</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Marital status">
<meta property="og:description" content="dymiumCore">
<meta property="og:image" content="https://core.dymium.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-158512288-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158512288-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dymiumCore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dymium-intro.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/why-another-microsim.html">Why another microsimulation package?</a>
    </li>
    <li class="dropdown-header">Manual</li>
    <li>
      <a href="../articles/for-developers.html">For developers</a>
    </li>
    <li>
      <a href="../articles/for-modellers.html">For modellers</a>
    </li>
    <li>
      <a href="../articles/for-endusers.html">For end users</a>
    </li>
    <li class="dropdown-header">Use cases</li>
    <li>
      <a href="../articles/residential-mobility.html">Residential mobility</a>
    </li>
    <li>
      <a href="../articles/mate-matching.html">Mate matching</a>
    </li>
    <li>
      <a href="../articles/marital-status.html">Marital status</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dymium-org/dymiumCore/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="marital-status_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="marital-status_files/core-js-2.5.3/shim.min.js"></script><script src="marital-status_files/react-16.12.0/react.min.js"></script><script src="marital-status_files/react-16.12.0/react-dom.min.js"></script><script src="marital-status_files/reactwidget-1.0.0/react-tools.js"></script><script src="marital-status_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="marital-status_files/reactable-binding-0.2.0/reactable.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Marital status</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dymium-org/dymiumCore/blob/master/vignettes/marital-status.Rmd"><code>vignettes/marital-status.Rmd</code></a></small>
      <div class="hidden name"><code>marital-status.Rmd</code></div>

    </div>

    
    
<div id="build-your-world" class="section level2">
<h2 class="hasAnchor">
<a href="#build-your-world" class="anchor"></a>Build your world!</h2>
<p>In dymium, a ‘world’ object contains everything from representations of entities (eg: individuals, households, residential building, firms, and so on) to the rules (eg: probabilistic models, rates, exogenous variables, etc) that the entities in your world follow.</p>
<p>Hence, to create your first dymium model you must first prepare your <code>world</code> and add your entities and rules that they will follow.<code>dymiumCore</code> provides four toy datasets which are individuals, households, residential buildings and zones. All of them are linkable by the id columns. All individuals belong to households, all households occupy residential buildings, all residential buildings are in the zones.</p>
<p>Let’s create a world object.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dymiumCore</span>)
<span class="co">#&gt; ── * dymium's options * ──────────────────────────────────────────────────────</span>
<span class="co">#&gt; ● dymium.input_dir:</span>
<span class="co">#&gt;   /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpIHT9H0/scenario/inputs</span>
<span class="co">#&gt; ● dymium.output_dir:</span>
<span class="co">#&gt;   /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpIHT9H0/scenario/outputs</span>
<span class="co">#&gt; ● dymium.scenario_dir:</span>
<span class="co">#&gt;   /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpIHT9H0/scenario</span>
<span class="co">#&gt; ● dymium.simulation_clock: 0</span>
<span class="co">#&gt; ● dymium.simulation_scale: 1</span>
<span class="no">world</span> <span class="kw">&lt;-</span> <span class="no">World</span>$<span class="fu">new</span>()</pre></body></html></div>
<p><code>World$new()</code> is a <code><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6::R6Class()</a></code> constructor, a constructor is a class method that creates an object of that class. So the line above creates a <code>World</code> object and assigns it as <code>world</code> to your global environment. Now, your newly created world is still emptied. So we are going to add individuals into it using the <code>toy_individuals</code> dataset from <code>dymiumCore</code>.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">reactable</span>)
<span class="kw pkg">reactable</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/reactable/man/reactable.html">reactable</a></span>(<span class="no">toy_individuals</span>, <span class="kw">filterable</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">minRows</span> <span class="kw">=</span> <span class="fl">10</span>)</pre></body></html></div>
<div id="htmlwidget-40026a3253232ddd77ea" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-40026a3253232ddd77ea">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"pid":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373],"hid":[1,2,2,3,3,3,4,4,4,4,4,5,5,6,7,7,8,8,8,9,9,9,10,11,11,12,13,13,13,14,15,15,16,16,16,17,17,18,19,19,20,20,20,21,21,22,23,23,23,24,24,24,24,24,25,25,25,25,25,26,27,27,27,27,28,28,28,28,28,29,30,30,31,31,31,32,32,33,33,34,34,34,34,35,35,36,36,37,37,37,38,38,38,38,38,39,39,39,39,39,40,40,41,41,41,42,42,43,43,43,43,43,44,45,45,46,47,47,47,47,47,48,49,49,50,50,50,50,51,51,51,51,52,52,52,52,53,53,53,53,54,55,56,56,56,56,57,58,58,58,58,59,59,59,59,60,61,61,62,62,63,63,63,63,64,65,65,66,66,67,67,67,68,68,69,69,69,70,70,70,71,71,71,72,72,72,73,73,73,74,74,74,75,75,76,77,77,78,78,78,78,78,79,79,79,80,80,81,81,81,82,82,82,83,84,85,85,85,85,86,86,86,86,87,87,87,88,88,88,88,89,90,90,91,91,91,91,91,91,92,92,92,92,92,93,93,93,94,95,95,95,96,96,97,97,98,98,99,99,99,99,100,101,102,103,103,103,104,104,104,104,104,105,105,105,105,105,105,106,107,107,107,107,108,109,109,110,110,110,111,111,111,112,112,113,113,114,114,114,114,115,116,116,117,117,118,118,119,119,119,120,120,120,120,120,121,121,121,121,122,122,122,123,123,124,124,125,126,126,127,127,128,128,129,129,129,129,130,130,131,132,132,132,132,133,133,133,134,134,135,135,136,136,137,138,138,138,138,139,139,140,140,141,141,141,142,142,143,143,144,144,144,144],"age":[71,31,29,38,25,0,53,52,14,7,22,36,38,66,29,24,67,66,41,73,67,48,17,41,39,31,28,26,1,41,29,34,40,37,9,21,22,38,44,30,40,37,1,23,24,58,56,64,22,55,53,20,20,22,52,53,23,23,19,85,47,49,19,6,45,43,19,11,10,85,90,81,65,53,26,78,80,33,31,40,43,5,6,47,17,71,67,55,57,26,58,54,29,24,17,39,38,14,2,0,38,39,30,26,4,62,62,28,45,8,0,3,87,78,79,80,46,19,15,24,45,37,64,55,43,44,12,6,46,48,1,67,38,36,16,14,61,56,27,23,63,25,53,52,24,19,27,47,45,22,24,84,70,37,43,59,63,63,21,20,42,42,5,6,48,37,42,56,51,30,34,4,64,63,43,19,17,67,62,32,73,73,44,29,29,0,64,58,26,51,19,24,63,61,49,26,26,43,43,11,8,9,51,45,12,62,63,44,39,2,55,58,24,79,45,49,19,16,15,47,42,18,16,50,50,29,43,39,14,8,40,27,31,50,45,27,21,16,18,58,40,26,20,17,61,56,26,41,44,16,15,79,54,58,37,66,64,40,40,13,3,84,39,83,28,21,9,45,41,11,6,51,42,44,18,11,67,66,43,49,47,15,15,69,71,56,27,26,3,51,53,24,59,56,58,59,31,25,5,4,51,53,55,21,3,55,28,42,19,12,31,35,13,12,2,62,54,25,33,49,48,22,35,9,23,22,44,59,57,56,57,52,59,41,44,15,12,66,66,41,57,52,15,24,37,42,5,60,60,64,69,50,55,36,49,49,12,7,67,67,61,63,61,61,12,75,67,77,73,49,59,15,17],"sex":["male","female","female","male","female","male","male","female","female","female","male","male","female","male","male","female","male","female","male","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","male","male","male","female","male","female","female","male","female","male","female","male","male","male","female","female","female","male","male","female","female","male","male","female","male","female","female","female","male","female","male","female","male","female","male","female","male","female","female","male","female","male","female","female","male","male","male","female","female","male","female","female","male","female","male","female","female","male","male","male","female","female","female","female","male","female","male","female","female","male","female","female","female","female","male","male","female","male","female","female","female","male","female","female","male","male","male","female","female","male","female","male","male","female","female","female","male","female","male","female","male","female","male","female","female","male","male","female","male","male","female","male","female","male","female","male","female","male","male","male","male","female","female","male","male","female","female","female","male","female","male","male","female","male","female","female","male","female","female","male","female","male","female","male","male","female","male","male","female","female","male","female","male","female","female","male","male","female","male","female","male","female","male","female","female","female","male","female","female","male","female","female","male","female","male","female","female","female","female","female","male","male","male","male","female","male","male","female","male","male","male","female","male","male","female","female","male","female","male","male","male","male","female","male","female","male","female","female","male","female","male","female","female","male","female","male","male","female","male","female","male","female","male","female","female","male","female","female","male","female","male","male","female","male","male","male","male","female","male","male","male","female","female","male","female","male","female","female","male","female","male","female","male","male","female","male","female","male","male","female","male","female","male","male","female","female","male","female","male","male","male","female","male","female","male","female","male","female","male","male","female","male","male","male","female","male","female","male","female","female","female","male","female","female","male","female","male","male","female","male","male","male","female","male","male","female","male","female","female","male","female","female","male","male","female","female","male","male","male","female","male","male","male","female","male","female","male","female","male","female","male","female","male","female","male","male","male"],"marital_status":["never married","never married","never married","married","married","not applicable","married","married","not applicable","not applicable","never married","never married","never married","widowed","married","married","married","married","divorced","married","married","never married","never married","never married","never married","never married","never married","never married","not applicable","never married","never married","never married","married","married","not applicable","never married","never married","never married","divorced","never married","married","married","not applicable","never married","never married","never married","married","married","never married","married","married","never married","never married","never married","married","married","never married","never married","never married","widowed","married","married","never married","not applicable","married","married","never married","not applicable","not applicable","widowed","married","married","married","married","never married","married","married","never married","never married","married","married","not applicable","not applicable","divorced","never married","married","married","married","married","never married","married","married","never married","never married","never married","never married","never married","not applicable","not applicable","not applicable","married","married","married","married","not applicable","married","married","never married","separated","not applicable","not applicable","not applicable","widowed","married","married","widowed","married","never married","never married","never married","married","never married","married","married","married","married","not applicable","not applicable","married","married","not applicable","divorced","married","married","never married","not applicable","married","married","never married","never married","divorced","never married","married","married","never married","never married","never married","married","married","never married","never married","married","married","never married","separated","divorced","married","married","never married","never married","married","married","not applicable","not applicable","never married","married","married","married","married","married","married","not applicable","married","married","divorced","never married","never married","married","married","never married","married","married","never married","married","married","not applicable","married","married","never married","divorced","never married","never married","married","married","never married","married","married","married","married","not applicable","not applicable","not applicable","married","married","not applicable","divorced","divorced","divorced","divorced","not applicable","married","married","never married","widowed","never married","separated","never married","never married","never married","married","married","never married","never married","married","married","never married","married","married","not applicable","not applicable","never married","married","married","married","married","never married","never married","never married","never married","married","married","never married","never married","never married","married","married","never married","never married","divorced","never married","never married","widowed","separated","divorced","never married","divorced","divorced","married","married","not applicable","not applicable","widowed","separated","widowed","married","married","not applicable","married","married","not applicable","not applicable","never married","married","married","never married","not applicable","married","married","never married","married","married","never married","never married","widowed","married","married","married","married","not applicable","married","married","never married","married","married","married","married","married","married","not applicable","not applicable","divorced","married","married","never married","not applicable","married","never married","divorced","never married","not applicable","married","married","not applicable","not applicable","not applicable","married","married","never married","married","married","married","never married","divorced","not applicable","never married","never married","never married","married","married","married","married","married","married","married","married","never married","not applicable","married","married","divorced","married","married","never married","never married","married","married","not applicable","married","married","married","married","divorced","divorced","separated","married","married","not applicable","not applicable","married","married","married","married","married","married","not applicable","married","married","married","married","married","married","never married","never married"],"partner_id":["NA","NA","NA",5,4,"NA",8,7,"NA","NA","NA","NA","NA","NA",16,15,18,17,"NA",21,20,"NA","NA",25,24,"NA",28,27,"NA","NA",32,31,34,33,"NA","NA","NA","NA",40,39,42,41,"NA",45,44,"NA",48,47,"NA",51,50,"NA","NA","NA",56,55,"NA","NA","NA","NA",62,61,"NA","NA",66,65,"NA","NA","NA","NA",72,71,74,73,"NA",77,76,79,78,81,80,"NA","NA","NA","NA",87,86,89,88,"NA",92,91,"NA","NA","NA",97,96,"NA","NA","NA",102,101,104,103,"NA",107,106,"NA","NA","NA","NA","NA","NA",115,114,"NA",121,"NA","NA","NA",117,"NA",124,123,126,125,"NA","NA",130,129,"NA","NA",134,133,"NA","NA",138,137,"NA","NA","NA","NA",144,143,"NA","NA","NA",149,148,"NA","NA",153,152,"NA","NA","NA",158,157,160,159,162,161,"NA","NA","NA",167,166,169,168,171,170,"NA",174,173,"NA","NA","NA",179,178,"NA",182,181,"NA",185,184,"NA",188,187,"NA","NA","NA","NA",194,193,"NA",197,196,199,198,"NA","NA","NA",204,203,"NA",207,206,209,208,"NA",212,211,"NA","NA","NA","NA","NA","NA","NA",221,220,"NA","NA",225,224,"NA",228,227,"NA","NA","NA",233,232,235,234,"NA","NA","NA","NA",241,240,"NA","NA","NA",246,245,"NA","NA","NA","NA","NA","NA","NA","NA","NA",257,256,259,258,"NA","NA","NA","NA","NA",266,265,"NA",269,268,"NA","NA","NA",274,273,"NA","NA",278,277,"NA",281,280,"NA","NA","NA",286,285,288,287,"NA",291,290,"NA",294,293,296,295,298,297,"NA","NA","NA",303,302,"NA","NA","NA","NA","NA","NA","NA",312,311,"NA","NA","NA",317,316,"NA","NA",321,320,"NA","NA","NA","NA","NA","NA",329,328,331,330,333,332,335,334,"NA","NA",339,338,"NA",342,341,"NA","NA",346,345,"NA",349,348,351,350,353,352,"NA",356,355,"NA","NA",360,359,362,361,364,363,"NA",367,366,369,368,371,370,"NA","NA"],"father_id":["NA","NA","NA","NA","NA",4,"NA","NA",7,7,"NA","NA","NA","NA","NA","NA","NA","NA",17,"NA","NA",20,"NA","NA","NA","NA","NA","NA",28,"NA","NA","NA","NA","NA",33,"NA","NA","NA","NA","NA","NA","NA",41,"NA","NA","NA","NA","NA",48,"NA","NA",50,50,50,"NA","NA",55,55,55,"NA","NA","NA",61,61,"NA","NA",65,65,65,"NA","NA","NA","NA","NA",73,"NA","NA","NA","NA","NA","NA",81,81,"NA","NA","NA","NA","NA","NA",89,"NA","NA",91,91,91,"NA","NA",96,96,96,"NA","NA","NA","NA",103,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",121,121,121,"NA","NA","NA","NA","NA","NA",126,126,"NA","NA",129,"NA","NA","NA",133,133,"NA","NA",137,137,"NA","NA","NA","NA",143,143,"NA","NA","NA",148,148,"NA","NA",152,152,"NA","NA","NA","NA","NA","NA","NA",161,161,"NA","NA","NA","NA","NA","NA","NA",170,"NA","NA","NA","NA","NA","NA","NA",178,"NA","NA",181,"NA","NA",184,"NA","NA",187,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",199,199,199,"NA","NA",203,"NA","NA","NA","NA",209,"NA","NA",211,"NA","NA","NA","NA","NA","NA","NA","NA",220,220,"NA","NA",225,"NA","NA",227,227,"NA","NA","NA","NA","NA",235,235,235,"NA","NA","NA",240,240,240,"NA","NA",245,"NA","NA","NA","NA","NA",252,"NA","NA","NA","NA","NA","NA",259,259,"NA","NA","NA","NA","NA",265,"NA","NA",268,268,"NA","NA","NA",273,273,"NA","NA","NA","NA","NA",280,280,"NA","NA","NA","NA","NA",287,"NA","NA",290,"NA","NA","NA","NA","NA","NA",297,297,"NA","NA","NA","NA","NA","NA",306,"NA","NA","NA","NA","NA",311,311,311,"NA","NA",316,316,"NA","NA",320,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",334,334,"NA","NA","NA","NA","NA",341,341,"NA","NA",346,"NA","NA","NA","NA","NA","NA","NA","NA","NA",355,355,"NA","NA","NA","NA","NA","NA",363,"NA","NA","NA","NA","NA","NA",371,371],"mother_id":["NA","NA","NA","NA","NA",5,"NA","NA",8,8,"NA","NA","NA","NA","NA","NA","NA","NA",18,"NA","NA",21,"NA","NA","NA","NA","NA","NA",27,"NA","NA","NA","NA","NA",34,"NA","NA","NA","NA","NA","NA","NA",42,"NA","NA","NA","NA","NA",47,"NA","NA",51,51,51,"NA","NA",56,56,56,"NA","NA","NA",62,62,"NA","NA",66,66,66,"NA","NA","NA","NA","NA",74,"NA","NA","NA","NA","NA","NA",80,80,"NA",84,"NA","NA","NA","NA",88,"NA","NA",92,92,92,"NA","NA",97,97,97,"NA","NA","NA","NA",104,"NA","NA","NA","NA",108,108,108,"NA","NA","NA","NA","NA",117,117,117,"NA","NA","NA","NA","NA","NA",125,125,"NA","NA",130,"NA","NA","NA",134,134,"NA","NA",138,138,"NA","NA","NA","NA",144,144,"NA","NA","NA",149,149,"NA","NA",153,153,"NA","NA","NA","NA","NA","NA","NA",162,162,"NA","NA","NA","NA","NA","NA","NA",171,"NA","NA","NA",175,175,"NA","NA",179,"NA","NA",182,"NA","NA",185,"NA","NA",188,"NA",190,190,"NA","NA","NA","NA","NA","NA","NA",198,198,198,"NA","NA",204,"NA","NA","NA","NA",208,"NA","NA",212,"NA","NA","NA",216,216,216,"NA","NA",221,221,"NA","NA",224,"NA","NA",228,228,"NA","NA","NA","NA","NA",234,234,234,"NA","NA","NA",241,241,241,"NA","NA",246,"NA","NA",249,249,"NA","NA","NA",254,"NA","NA","NA","NA",258,258,"NA","NA","NA","NA","NA",266,"NA","NA",269,269,"NA","NA","NA",274,274,"NA","NA","NA","NA","NA",281,281,"NA","NA","NA","NA","NA",288,"NA","NA",291,"NA","NA","NA","NA","NA","NA",298,298,"NA","NA","NA","NA",304,"NA","NA","NA",308,308,"NA","NA",312,312,312,"NA","NA",317,317,"NA","NA",321,"NA",323,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",335,335,"NA","NA","NA","NA","NA",342,342,"NA","NA",345,"NA","NA","NA","NA","NA","NA","NA","NA","NA",356,356,"NA","NA","NA","NA","NA","NA",364,"NA","NA","NA","NA","NA","NA",370,370]},"columns":[{"accessor":"pid","name":"pid","type":"numeric"},{"accessor":"hid","name":"hid","type":"numeric"},{"accessor":"age","name":"age","type":"numeric"},{"accessor":"sex","name":"sex","type":"character"},{"accessor":"marital_status","name":"marital_status","type":"character"},{"accessor":"partner_id","name":"partner_id","type":"numeric"},{"accessor":"father_id","name":"father_id","type":"numeric"},{"accessor":"mother_id","name":"mother_id","type":"numeric"}],"filterable":true,"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":10,"dataKey":"e34eec8ec9cd46109c5f8a51f5fa29b8"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script><p>To add individuals into world and you must first create an Individual object. The Individual class is provided by <code>dymiumCore</code>, it contains methods that help you to access and modify microdata of individuals such as the <code>toy_individuals</code> data. To see what methods and fields are available put <code><a href="../reference/Individual.html">?Individual</a></code> into your R console and press enter.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">Ind</span> <span class="kw">&lt;-</span> <span class="no">Individual</span>$<span class="fu">new</span>(<span class="kw">.data</span> <span class="kw">=</span> <span class="no">toy_individuals</span>, <span class="kw">id_col</span> <span class="kw">=</span> <span class="st">"pid"</span>)
<span class="no">Ind</span>
<span class="co">#&gt; Class: Individual</span>
<span class="co">#&gt;  Inheritance: Individual &lt;- Agent &lt;- Entity &lt;- Generic &lt;- R6</span>
<span class="co">#&gt;  Number_of_entities: 373</span>
<span class="co">#&gt;  Number_of_removed_entities: 0</span>
<span class="co">#&gt;  Data[rows, cols]: attrs[373, 8]</span></pre></body></html></div>
<p>By calling <code>Ind</code> it returns some useful information about the object such as the number of entities of class Individual and the inheritance structure.</p>
<p>Now let’s add <code>Ind</code> into <code>world</code> using <code>world</code>’s <code>add</code> method.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">world</span>$<span class="fu">add</span>(<span class="no">Ind</span>, <span class="kw">name</span> <span class="kw">=</span> <span class="st">"Individual"</span>)
<span class="co">#&gt; [04:27:27] WARN  dymiumCore world$add: The given `name` will be ignored since the object in x is of an Entity object or a Container object. The classname of the object will be used as its name.</span></pre></body></html></div>
<p>You can see from the warning message above that <code>name</code> is not needed when adding an Entity class to <code>world</code> since it will use the name of the class as the name of the added object. However, when you add a model object the <code>name</code> argument must be specified. Currently, only one instance of each Entity class can be added to <code>world</code> since there is no obvious benefit to adding multiple instances of the same class to <code>world</code> since it is probably easier and clearer just to combine them as one instance.</p>
<p>Now that your <code>world</code> contains Individual agents we may want to introduce some rules so that we can start to microsimulate something!</p>
<p>Let’s microsimulate changes in marital status of the Individual agents.</p>
<p>Using <code>toy_individuals</code> as the data to estimate a marital status model with the <code>caret</code> package. By default, <code>caret</code> will fit a random forest model if the <code>method</code> argument in <code>train</code> is not specified.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">caret</span>)
<span class="co">#&gt; Loading required package: lattice</span>
<span class="co">#&gt; Loading required package: ggplot2</span>
<span class="no">marital_status_model</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/caret/man/train.html">train</a></span>(<span class="no">marital_status</span> ~ <span class="no">age</span> + <span class="no">sex</span>,
                              <span class="kw">data</span> <span class="kw">=</span> <span class="no">toy_individuals</span>)
<span class="co">#&gt; note: only 1 unique complexity parameters in default grid. Truncating the grid to 1 .</span></pre></body></html></div>
<p>Add the model to <code>world</code> and assign its key as “marital_status_model”.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">world</span>$<span class="fu">add</span>(<span class="no">marital_status_model</span>, <span class="kw">name</span> <span class="kw">=</span> <span class="st">"marital_status_model"</span>)</pre></body></html></div>
<p>Create an event function for changes in marital status.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">event_demography_maritalStatus</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">world</span>) {

  <span class="co"># get the stored Individual object from `world`</span>
  <span class="no">Ind</span> <span class="kw">&lt;-</span> <span class="no">world</span>$<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="st">"Individual"</span>)

  <span class="co"># get the stored marital status model object from `world`</span>
  <span class="co"># unpack it with `$get()`</span>
  <span class="no">model</span> <span class="kw">&lt;-</span> <span class="no">world</span>$<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="st">"marital_status_model"</span>)$<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>()

  <span class="co"># create a TransitionClassification object to perform a simulation using the model</span>
  <span class="co"># on the individual agents.</span>
  <span class="no">TransMaritalStatus</span> <span class="kw">&lt;-</span> <span class="no">TransitionClassification</span>$<span class="fu">new</span>(<span class="no">Ind</span>, <span class="no">model</span>)

  <span class="co"># update the `marital_status` column of the individual agents using the simulated </span>
  <span class="co"># result</span>
  <span class="no">TransMaritalStatus</span>$<span class="fu">update_agents</span>(<span class="kw">attr</span> <span class="kw">=</span> <span class="st">"marital_status"</span>)

  <span class="co"># end of event must returns the input world object which now contains the updated</span>
  <span class="co"># individual agents.</span>
  <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="no">world</span>)
}</pre></body></html></div>
<p>Since the marital status model uses age of the individual as an explanatory variable we make all individuals aged one year more every iteration</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">event_demography_age</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">world</span>) {

  <span class="co"># get the stored Individual object from `world`</span>
  <span class="no">Ind</span> <span class="kw">&lt;-</span> <span class="no">world</span>$<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="st">"Individual"</span>)

  <span class="co"># increase age of all individuals by one </span>
  <span class="co"># note that in R 1L is integer while 1 is numeric.</span>
  <span class="no">Ind</span>$<span class="fu">get_data</span>(<span class="kw">copy</span> <span class="kw">=</span> <span class="fl">FALSE</span>)[, <span class="no">age</span> <span class="kw">:=</span> <span class="no">age</span> + <span class="fl">1L</span>]

  <span class="fu"><a href="https://rdrr.io/r/base/function.html">return</a></span>(<span class="no">world</span>)
}</pre></body></html></div>
<p>When calling the <code>get_data</code> method of an Entity class and specify <code>copy</code> as <code>FALSE</code> the reference to the data will be returned hence allows the data to be updated in place/by reference. If <code>copy</code> is <code>TRUE</code> or not given a copy of the data will be returned hence any mofification to that data wouldn’t change the data of those entities.</p>
<p>Now, build a microsimulation pipeline to run for 10 iterations and store some statistics at the end of each iteration for visualisation later.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">count_ls</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>()
<span class="kw">for</span> (<span class="no">i</span> <span class="kw">in</span> <span class="fl">1</span>:<span class="fl">10</span>) {
  <span class="no">world</span>$<span class="fu">start_iter</span>(<span class="kw">time_step</span> <span class="kw">=</span> <span class="no">i</span>, <span class="kw">unit</span> <span class="kw">=</span> <span class="st">"year"</span>) <span class="kw">%&gt;%</span>
    <span class="fu">event_demography_age</span>() <span class="kw">%&gt;%</span>
    <span class="fu">event_demography_maritalStatus</span>()

  <span class="co"># record the count of households by zone in each iteration</span>
  <span class="no">count_ls</span><span class="kw">[[</span><span class="no">i</span>]] <span class="kw">&lt;-</span>
    <span class="no">world</span>$<span class="fu"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="st">"Individual"</span>)$<span class="fu">get_data</span>()[, <span class="fu">.</span>(<span class="kw">count</span> <span class="kw">=</span> <span class="no">.N</span>, <span class="kw">iteration</span> <span class="kw">=</span> <span class="no">i</span>), <span class="no">marital_status</span>]
}</pre></body></html></div>
<p>Create a visualisation to show how the distribution of marital status changes over the course of the simulation.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">data.table</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)
<span class="no">count</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/rbindlist.html">rbindlist</a></span>(<span class="no">count_ls</span>)

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">count</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="no">iteration</span>, <span class="no">count</span>, <span class="kw">group</span> <span class="kw">=</span> <span class="no">marital_status</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw">size</span> <span class="kw">=</span> <span class="fl">2</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"Marital status across 10 iterations"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(~ <span class="no">marital_status</span>)</pre></body></html></div>
<p><img src="marital-status_files/figure-html/unnamed-chunk-11-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>The reason why the number of people with marital status “not applicable” is in decline is because there were no births added to the simulated population. All “not applicable” individuals are those with age less than 16 year-old.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Amarin Siripanich, Taha Rashidi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '5b9cd61032daf2c5966b7cd693157aa2',
    indexName: 'dymiumcore',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
